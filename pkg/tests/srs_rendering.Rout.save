
R version 3.6.1 (2019-07-05) -- "Action of the Toes"
Copyright (C) 2019 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> suppressPackageStartupMessages(library(rgdal))
> getPROJ4VersionInfo()
[1] "Rel. 6.2.0, September 1st, 2019, [PJ_VERSION: 620]"
> getGDALVersionInfo()
[1] "GDAL 3.0.1, released 2019/06/28"
> d <- system.file("vectors", package="rgdal")
> shps <- ogrListLayers(d)
> sapply(shps, function(l) OGRSpatialRef(d, l))
                                                                                          trin_inca_pl03 
                                                                                                      NA 
                                                                                kiritimati_primary_roads 
                                                      "+proj=utm +zone=4 +datum=WGS84 +units=m +no_defs" 
                                                                                                  cities 
                                                                   "+proj=longlat +datum=WGS84 +no_defs" 
                                                                                                scot_BNG 
"+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +units=m +no_defs" 
Warning message:
In OGRSpatialRef(d, l) :
  Discarded datum OSGB_1936 in CRS definition: +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +units=m +no_defs
> OGRSpatialRef(file.path(d, "airports.gml"), "airports")
[1] NA
> OGRSpatialRef(file.path(d, "ps_cant_31.MIF"), "ps_cant_31")
[1] "+proj=longlat +a=6378137.01 +rf=298.257223563 +towgs84=0,0,0,0,0,0,0 +no_defs"
Warning message:
In OGRSpatialRef(file.path(d, "ps_cant_31.MIF"), "ps_cant_31") :
  Discarded datum MIF 0 in CRS definition: +proj=longlat +a=6378137.01 +rf=298.257223563 +towgs84=0,0,0,0,0,0,0 +no_defs,
 but +towgs84= values preserved
> OGRSpatialRef(file.path(d, "Up.tab"), "Up")
[1] "+proj=utm +zone=23 +south +ellps=aust_SA +towgs84=-57,1,-41,0,0,0,0 +units=m +no_defs"
Warning message:
In OGRSpatialRef(file.path(d, "Up.tab"), "Up") :
  Discarded datum South_American_Datum_1969 in CRS definition: +proj=utm +zone=23 +south +ellps=aust_SA +towgs84=-57,1,-41,0,0,0,0 +units=m +no_defs,
 but +towgs84= values preserved
> OGRSpatialRef(file.path(d, "test_trk2.gpx"), "tracks")
[1] "+proj=longlat +datum=WGS84 +no_defs"
> OGRSpatialRef(file.path(d, "PacoursIKA2.TAB"), "PacoursIKA2")
[1] "+proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.999877420000019 +x_0=600000 +y_0=2200000.00000032 +ellps=clrk80ign +pm=paris +towgs84=-168,-60,320,0,0,0,0 +units=m +no_defs"
Warning message:
In OGRSpatialRef(file.path(d, "PacoursIKA2.TAB"), "PacoursIKA2") :
  Discarded datum NTF_Paris_Meridian in CRS definition: +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.999877420000019 +x_0=600000 +y_0=2200000.00000032 +ellps=clrk80ign +pm=paris +towgs84=-168,-60,320,0,0,0,0 +units=m +no_defs,
 but +towgs84= values preserved
> d <- system.file("pictures", package="rgdal")
> f <- c("SP27GTIF.TIF", "cea.tif", "erdas_spnad83.tif", "scaleoffset.vrt",
+  "test_envi_class.envi")
> ds <- GDAL.open(file.path(d, "SP27GTIF.TIF"))
> getProjectionRef(ds, OVERRIDE_PROJ_DATUM_WITH_TOWGS84=TRUE)
[1] "+proj=tmerc +lat_0=36.6666666666667 +lon_0=-88.3333333333333 +k=0.999975 +x_0=152400.30480061 +y_0=0 +ellps=clrk66 +towgs84=-8,160,176,0,0,0,0 +units=us-ft +no_defs"
Warning message:
In getProjectionRef(ds, OVERRIDE_PROJ_DATUM_WITH_TOWGS84 = TRUE) :
  Discarded datum North_American_Datum_1927 in CRS definition: +proj=tmerc +lat_0=36.6666666666667 +lon_0=-88.3333333333333 +k=0.999975 +x_0=152400.30480061 +y_0=0 +ellps=clrk66 +towgs84=-8,160,176,0,0,0,0 +units=us-ft +no_defs,
 but +towgs84= values preserved
> getProjectionRef(ds, OVERRIDE_PROJ_DATUM_WITH_TOWGS84=FALSE)
[1] "+proj=tmerc +lat_0=36.6666666666667 +lon_0=-88.3333333333333 +k=0.999975 +x_0=152400.30480061 +y_0=0 +ellps=clrk66 +towgs84=-8,160,176,0,0,0,0 +units=us-ft +no_defs"
Warning message:
In getProjectionRef(ds, OVERRIDE_PROJ_DATUM_WITH_TOWGS84 = FALSE) :
  Discarded datum North_American_Datum_1927 in CRS definition: +proj=tmerc +lat_0=36.6666666666667 +lon_0=-88.3333333333333 +k=0.999975 +x_0=152400.30480061 +y_0=0 +ellps=clrk66 +towgs84=-8,160,176,0,0,0,0 +units=us-ft +no_defs,
 but +towgs84= values preserved
> GDAL.close(ds)
> ds <- GDAL.open(file.path(d, "cea.tif"))
> getProjectionRef(ds, OVERRIDE_PROJ_DATUM_WITH_TOWGS84=TRUE)
[1] "+proj=cea +lat_ts=33.75 +lon_0=-117.333333333333 +x_0=0 +y_0=0 +datum=NAD27 +units=m +no_defs"
> getProjectionRef(ds, OVERRIDE_PROJ_DATUM_WITH_TOWGS84=FALSE)
[1] "+proj=cea +lat_ts=33.75 +lon_0=-117.333333333333 +x_0=0 +y_0=0 +datum=NAD27 +units=m +no_defs"
> GDAL.close(ds)
> ds <- GDAL.open(file.path(d, "erdas_spnad83.tif"))
> getProjectionRef(ds, OVERRIDE_PROJ_DATUM_WITH_TOWGS84=TRUE)
[1] "+proj=tmerc +lat_0=30 +lon_0=-82.1666666666667 +k=0.9999 +x_0=200000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=us-ft +no_defs"
Warning message:
In getProjectionRef(ds, OVERRIDE_PROJ_DATUM_WITH_TOWGS84 = TRUE) :
  Discarded datum North_American_Datum_1983 in CRS definition: +proj=tmerc +lat_0=30 +lon_0=-82.1666666666667 +k=0.9999 +x_0=200000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=us-ft +no_defs,
 but +towgs84= values preserved
> getProjectionRef(ds, OVERRIDE_PROJ_DATUM_WITH_TOWGS84=FALSE)
[1] "+proj=tmerc +lat_0=30 +lon_0=-82.1666666666667 +k=0.9999 +x_0=200000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=us-ft +no_defs"
Warning message:
In getProjectionRef(ds, OVERRIDE_PROJ_DATUM_WITH_TOWGS84 = FALSE) :
  Discarded datum North_American_Datum_1983 in CRS definition: +proj=tmerc +lat_0=30 +lon_0=-82.1666666666667 +k=0.9999 +x_0=200000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=us-ft +no_defs,
 but +towgs84= values preserved
> GDAL.close(ds)
> ds <- GDAL.open(file.path(d, "scaleoffset.vrt"))
> getProjectionRef(ds, OVERRIDE_PROJ_DATUM_WITH_TOWGS84=TRUE)
[1] "+proj=utm +zone=18 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"
Warning message:
In getProjectionRef(ds, OVERRIDE_PROJ_DATUM_WITH_TOWGS84 = TRUE) :
  Discarded datum WGS_1984 in CRS definition: +proj=utm +zone=18 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs,
 but +towgs84= values preserved
> getProjectionRef(ds, OVERRIDE_PROJ_DATUM_WITH_TOWGS84=FALSE)
[1] "+proj=utm +zone=18 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"
Warning message:
In getProjectionRef(ds, OVERRIDE_PROJ_DATUM_WITH_TOWGS84 = FALSE) :
  Discarded datum WGS_1984 in CRS definition: +proj=utm +zone=18 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs,
 but +towgs84= values preserved
> GDAL.close(ds)
> ds <- GDAL.open(file.path(d, "test_envi_class.envi"))
> getProjectionRef(ds, OVERRIDE_PROJ_DATUM_WITH_TOWGS84=TRUE)
[1] "+proj=longlat +datum=WGS84 +no_defs"
> getProjectionRef(ds, OVERRIDE_PROJ_DATUM_WITH_TOWGS84=FALSE)
[1] "+proj=longlat +datum=WGS84 +no_defs"
> GDAL.close(ds)
> 
> 
> proc.time()
   user  system elapsed 
  0.359   0.030   0.396 
