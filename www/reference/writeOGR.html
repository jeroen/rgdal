<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Write spatial vector data using OGR — writeOGR • rgdal</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Write spatial vector data using OGR — writeOGR" />
<meta property="og:description" content="The function is an interface with the OGR abstraction library for spatial vector data, allowing data to be written out using supported drivers. The drivers supported will depend on the local installation, and the capabilities of those drivers (many are read-only). The objects exported are SpatialPointsDataFrame, SpatialLinesDataFrame, or SpatialPolygonsDataFrame objects as defined in the sp package." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rgdal</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.5.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/PROJ6_GDAL3.html">RFC: Migration to PROJ6/GDAL3</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Write spatial vector data using OGR</h1>
    
    <div class="hidden name"><code>writeOGR.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The function is an interface with the OGR abstraction library for spatial vector data, allowing data to be written out using supported drivers. The drivers supported will depend on the local installation, and the capabilities of those drivers (many are read-only). The objects exported are SpatialPointsDataFrame, SpatialLinesDataFrame, or SpatialPolygonsDataFrame objects as defined in the sp package.</p>
    </div>

    <pre class="usage"><span class='fu'>writeOGR</span>(<span class='no'>obj</span>, <span class='no'>dsn</span>, <span class='no'>layer</span>, <span class='no'>driver</span>, <span class='kw'>dataset_options</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
 <span class='kw'>layer_options</span><span class='kw'>=</span><span class='kw'>NULL</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>check_exists</span><span class='kw'>=</span><span class='kw'>NULL</span>,
 <span class='kw'>overwrite_layer</span><span class='kw'>=</span><span class='fl'>FALSE</span>, <span class='kw'>delete_dsn</span><span class='kw'>=</span><span class='fl'>FALSE</span>, <span class='kw'>morphToESRI</span><span class='kw'>=</span><span class='kw'>NULL</span>,
 <span class='kw'>encoding</span><span class='kw'>=</span><span class='kw'>NULL</span>, <span class='kw'>shp_edge_case_fix</span><span class='kw'>=</span><span class='fl'>FALSE</span>, <span class='kw'>dumpSRS</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>obj</th>
      <td><p>a SpatialPointsDataFrame, SpatialLinesDataFrame, or a SpatialPolygonsDataFrame object.</p></td>
    </tr>
    <tr>
      <th>dsn</th>
      <td><p>data source name (interpretation varies by driver --- for some drivers, dsn is a file name, but may also be a folder)</p></td>
    </tr>
    <tr>
      <th>layer</th>
      <td><p>layer name (varies by driver, may be a file name without extension)</p></td>
    </tr>
    <tr>
      <th>driver</th>
      <td><p>a character string equal to one of the driver names returned by <code><a href='readOGR.html'>ogrDrivers</a></code></p></td>
    </tr>
    <tr>
      <th>dataset_options</th>
      <td><p>a character vector of options, which vary by driver, and should be treated as experimental</p></td>
    </tr>
    <tr>
      <th>layer_options</th>
      <td><p>a character vector of options, which vary by driver, and should be treated as experimental</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>if TRUE, returns a list of information about the attempted write operation</p></td>
    </tr>
    <tr>
      <th>check_exists</th>
      <td><p>default NULL, which tests for the GDAL version, and sets FALSE if &lt; 1.8.0, or TRUE for &gt;= 1.8.0</p></td>
    </tr>
    <tr>
      <th>overwrite_layer</th>
      <td><p>default FALSE, if TRUE and <code>check_exists=TRUE</code>, delete the existing layer of the same name from the data source before writing the new layer; this will delete data and must be used with extreme caution, its behaviour varies between drivers, and accommodates changes that may appear in GDAL 1.8</p></td>
    </tr>
    <tr>
      <th>delete_dsn</th>
      <td><p>default FALSE, may be set to TRUE if <code>overwrite_layer</code> reports that the data source cannot be updated; this will delete data and must be used with extreme caution, its behaviour varies between drivers, and accommodates changes that may appear in GDAL 1.8</p></td>
    </tr>
    <tr>
      <th>morphToESRI</th>
      <td><p>default NULL, in which case set TRUE if driver is &#8220;ESRI Shapefile&#8221; or FALSE otherwise; may be used to override this default</p></td>
    </tr>
    <tr>
      <th>encoding</th>
      <td><p>default NULL, if set to a character string, it will be used to convert output strings from the given value to UTF-8 encoding.</p></td>
    </tr>
    <tr>
      <th>shp_edge_case_fix</th>
      <td><p>default FALSE, if TRUE, attempt to work around MULTIPOLYGON to POLYGON degradation in ESRI Shapefile output with two touching exterior rings in a single feature (not yet implemented).</p></td>
    </tr>
    <tr>
      <th>dumpSRS</th>
      <td><p>dump SRS to stdout from inside GDAL to debug conversion - developer use only</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Working out which combination of dsn, layer, and driver (and option) values give the desired output takes time and care, and is constrained by the ability of drivers to write output; many are read-only. Use of the references given is highly advisable, with searches in the archives of other software using GDAL/OGR. Note that for the &#8220;ESRI Shapefile&#8221; driver and GDAL &gt;= 1.9, the <code>layer_options</code> value of &#8216;ENCODING=&#8220;LDID/CP1252&#8221;&#8217; or other values found on <a href='http://www.autopark.ru/ASBProgrammerGuide/DBFSTRUC.HTM'>http://www.autopark.ru/ASBProgrammerGuide/DBFSTRUC.HTM</a> to set the encoding byte of the output DBF file (link refered to in ogr/ogrsf_frmts/shape/ogrshapelayer.cpp. The effect of setting the LDID may vary depending on whether GDAL is built with iconv or not, and on the setting of the CPL Option &#8220;SHAPE_ENCODING&#8221;.</p>
<p>While there is no certainty, newer drivers such as KML, GML, SQLite and Geopackage (GPKG) may encode string fields as UTF-8. Users are advised to explore this on a case to case basis using <code><a href='https://rdrr.io/r/base/Encoding.html'>Encoding</a></code> on string fields of objects to be output, converting where necessary with <code><a href='https://rdrr.io/r/base/iconv.html'>iconv</a></code> or assigning the appropriate value with <code><a href='https://rdrr.io/r/base/Encoding.html'>Encoding</a></code>.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>if verbose=TRUE, a list of information about the attempted write operation</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Only a subset of possible data slot column classes may be written out; if the function returns an error that the data type of stated columns is unknown, examine the classes and check that they are one of <code><a href='https://rdrr.io/r/base/c.html'>c("numeric", "character", "factor", "POSIXt", "integer", "logical")</a></code>, and if not convert to such classes. Classes <code><a href='https://rdrr.io/r/base/c.html'>c("factor", "POSIXt")</a></code> are converted to character strings, and <code><a href='https://rdrr.io/r/base/c.html'>c("logical")</a></code> to integer internally.</p>
<p>For writing with the KML and GPX drivers, note that the geometries should be in geographical coordinates with datum WGS84.</p>
    <h2 class="hasAnchor" id="warning"><a class="anchor" href="#warning"></a>Warning</h2>

    <p>The <code>overwrite_layer</code> and <code>delete_dsn</code> arguments are provided only for experienced script writers who need to be able to destroy data, for example during repetetive simulation runs. They should never be used by anyone who is not confident about deleting files.</p>
    <h2 class="hasAnchor" id="writeogr-polygon-bug-in-"><a class="anchor" href="#writeogr-polygon-bug-in-"></a><code>writeOGR</code> Polygon bug in 1.1-1</h2>

    <p>In fixing a bug in the correct handling of SFS polygon geometries in version 1.1-1, a further bug was introduced affecting cases of wkbPolygon (not wkbMultiPolygon) output where SFS hole status in the output object was (correctly) defined in the comment to Polygons objects. The error only occurred when all the Polygons objects had one exterior ring, and zero or more interior rings. The error led to the coordinates of the rings cumulating, because the rings were not emptied before assigning the next ring. Version 1.1-2 corrects the error; thanks to  JamesWorrall for a complete bug report <a href='https://stat.ethz.ch/pipermail/r-sig-geo/2015-December/023796.html'>https://stat.ethz.ch/pipermail/r-sig-geo/2015-December/023796.html</a>.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p><a href='https://gdal.org/drivers/vector/index.html'>https://gdal.org/drivers/vector/index.html</a>, <a href='https://examples.oreilly.com/webmapping/'>https://examples.oreilly.com/webmapping/</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='readOGR.html'>readOGR</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>cities</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='readOGR.html'>readOGR</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"vectors"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"rgdal"</span>)[<span class='fl'>1</span>], <span class='st'>"cities"</span>)</div><div class='output co'>#&gt; OGR data source with driver: ESRI Shapefile 
#&gt; Source: "/tmp/RtmpIl4nA7/temp_libpath572574d7eceb/rgdal/vectors", layer: "cities"
#&gt; with 606 features
#&gt; It has 4 fields
#&gt; Integer64 fields read as strings:  POPULATION </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span>(<span class='no'>cities</span>$<span class='no'>POPULATION</span>) <span class='kw'>&lt;-</span> <span class='no'>cities</span>$<span class='no'>POPULATION</span> <span class='kw'>==</span> -<span class='fl'>99</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span>(<span class='no'>cities</span>$<span class='no'>POPULATION</span>)</div><div class='output co'>#&gt;  1270000  1550000  1140000  1190000  1225000  1250000  1300000  1400000 
#&gt;        5        4        3        3        3        3        3        3 
#&gt;  1600000  2050000   320000   600000   700000   800000  1025000  1060000 
#&gt;        3        3        3        3        3        3        2        2 
#&gt;  1100000 11100000  1170000  1185000  1325000  1460000  1500000  1525000 
#&gt;        2        2        2        2        2        2        2        2 
#&gt;  1800000   185000  1875000   203000  2250000  2325000  2400000  2950000 
#&gt;        2        2        2        2        2        2        2        2 
#&gt;  3025000   310000  3800000   400000   465000   535000   625000  6450000 
#&gt;        2        2        2        2        2        2        2        2 
#&gt;   670000   675000   770000   890000  9300000   960000   100000  1005000 
#&gt;        2        2        2        2        2        2        1        1 
#&gt;  1010000     1012 10150000  1020000  1024940  1029731  1030000  1037700 
#&gt;        1        1        1        1        1        1        1        1 
#&gt;  1040000  1045000  1050000  1055000  1061000   106416  1065000  1069727 
#&gt;        1        1        1        1        1        1        1        1 
#&gt;  1070000 10750000  1088624   109000   109382   109486   110153  1104209 
#&gt;        1        1        1        1        1        1        1        1 
#&gt;  1110000   111914  1120000  1144000   114500  1149401  1150000   116000 
#&gt;        1        1        1        1        1        1        1        1 
#&gt;  1160000  1165000  1175000    11753  1179000    12000   120000  1200000 
#&gt;        1        1        1        1        1        1        1        1 
#&gt;  1205000   121265  1216000  1227200    12426   124400   125263  1255000 
#&gt;        1        1        1        1        1        1        1        1 
#&gt;  1272400  1275000  (Other)     NA's 
#&gt;        1        1      415       30 </div><div class='input'><span class='no'>td</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span>(), <span class='st'>"rgdal_examples"</span>); <span class='fu'><a href='https://rdrr.io/r/base/files2.html'>dir.create</a></span>(<span class='no'>td</span>)
<span class='co'># BDR 2016-12-15 (MapInfo driver fails writing to directory with ".")</span>
<span class='kw'>if</span>(<span class='fu'><a href='https://rdrr.io/r/base/nchar.html'>nchar</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/Sys.getenv.html'>Sys.getenv</a></span>(<span class='st'>"OSGEO4W_ROOT"</span>)) <span class='kw'>&gt;</span> <span class='fl'>0</span>) {
    <span class='no'>OLDPWD</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>getwd</a></span>()
    <span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>setwd</a></span>(<span class='no'>td</span>)
    <span class='no'>td</span> <span class='kw'>&lt;-</span> <span class='st'>"."</span>
}
<span class='fu'>writeOGR</span>(<span class='no'>cities</span>, <span class='no'>td</span>, <span class='st'>"cities"</span>, <span class='kw'>driver</span><span class='kw'>=</span><span class='st'>"ESRI Shapefile"</span>)
<span class='fu'><a href='https://rdrr.io/r/base/try.html'>try</a></span>(<span class='fu'>writeOGR</span>(<span class='no'>cities</span>, <span class='no'>td</span>, <span class='st'>"cities"</span>, <span class='kw'>driver</span><span class='kw'>=</span><span class='st'>"ESRI Shapefile"</span>))</div><div class='output co'>#&gt; Error in writeOGR(cities, td, "cities", driver = "ESRI Shapefile") : 
#&gt;   layer exists, use a new layer name</div><div class='input'><span class='fu'>writeOGR</span>(<span class='no'>cities</span>, <span class='no'>td</span>, <span class='st'>"cities"</span>, <span class='kw'>driver</span><span class='kw'>=</span><span class='st'>"ESRI Shapefile"</span>, <span class='kw'>overwrite_layer</span><span class='kw'>=</span><span class='fl'>TRUE</span>)
<span class='no'>cities2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='readOGR.html'>readOGR</a></span>(<span class='no'>td</span>, <span class='st'>"cities"</span>)</div><div class='output co'>#&gt; OGR data source with driver: ESRI Shapefile 
#&gt; Source: "/tmp/RtmpCs4VdY/rgdal_examples", layer: "cities"
#&gt; with 606 features
#&gt; It has 4 fields</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span>(<span class='no'>cities2</span>$<span class='no'>POPULATION</span>)</div><div class='output co'>#&gt;  1270000  1550000  1140000  1190000  1225000  1250000  1300000  1400000 
#&gt;        5        4        3        3        3        3        3        3 
#&gt;  1600000  2050000   320000   600000   700000   800000  1025000  1060000 
#&gt;        3        3        3        3        3        3        2        2 
#&gt;  1100000 11100000  1170000  1185000  1325000  1460000  1500000  1525000 
#&gt;        2        2        2        2        2        2        2        2 
#&gt;  1800000   185000  1875000   203000  2250000  2325000  2400000  2950000 
#&gt;        2        2        2        2        2        2        2        2 
#&gt;  3025000   310000  3800000   400000   465000   535000   625000  6450000 
#&gt;        2        2        2        2        2        2        2        2 
#&gt;   670000   675000   770000   890000  9300000   960000   100000  1005000 
#&gt;        2        2        2        2        2        2        1        1 
#&gt;  1010000     1012 10150000  1020000  1024940  1029731  1030000  1037700 
#&gt;        1        1        1        1        1        1        1        1 
#&gt;  1040000  1045000  1050000  1055000  1061000   106416  1065000  1069727 
#&gt;        1        1        1        1        1        1        1        1 
#&gt;  1070000 10750000  1088624   109000   109382   109486   110153  1104209 
#&gt;        1        1        1        1        1        1        1        1 
#&gt;  1110000   111914  1120000  1144000   114500  1149401  1150000   116000 
#&gt;        1        1        1        1        1        1        1        1 
#&gt;  1160000  1165000  1175000    11753  1179000    12000   120000  1200000 
#&gt;        1        1        1        1        1        1        1        1 
#&gt;  1205000   121265  1216000  1227200    12426   124400   125263  1255000 
#&gt;        1        1        1        1        1        1        1        1 
#&gt;  1272400  1275000  (Other)     NA's 
#&gt;        1        1      415       30 </div><div class='input'><span class='kw'>if</span> (<span class='st'>"SQLite"</span> <span class='kw'>%in%</span> <span class='fu'><a href='readOGR.html'>ogrDrivers</a></span>()$<span class='no'>name</span>) {
  <span class='no'>tf</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span>()
  <span class='fu'><a href='https://rdrr.io/r/base/try.html'>try</a></span>(<span class='fu'>writeOGR</span>(<span class='no'>cities</span>, <span class='no'>tf</span>, <span class='st'>"cities"</span>, <span class='kw'>driver</span><span class='kw'>=</span><span class='st'>"SQLite"</span>, <span class='kw'>layer_options</span><span class='kw'>=</span><span class='st'>"LAUNDER=NO"</span>))
}
<span class='kw'>if</span> (<span class='st'>"GeoJSON"</span> <span class='kw'>%in%</span> <span class='fu'><a href='readOGR.html'>ogrDrivers</a></span>()$<span class='no'>name</span>) {
  <span class='no'>js</span> <span class='kw'>&lt;-</span> <span class='st'>'{
    "type": "MultiPolygon",
    "coordinates": [[[[102.0, 2.0], [103.0, 2.0], [103.0, 3.0], [102.0, 3.0],
    [102.0, 2.0]]], [[[100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0],
    [100.0, 0.0]]]]
  }'</span>
  <span class='no'>spdf</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='readOGR.html'>readOGR</a></span>(<span class='no'>js</span>, <span class='kw'>layer</span><span class='kw'>=</span><span class='st'>'OGRGeoJSON'</span>)
  <span class='no'>in1_comms</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span>(<span class='fu'>slot</span>(<span class='no'>spdf</span>, <span class='st'>"polygons"</span>), <span class='no'>comment</span>)
  <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='no'>in1_comms</span>)
  <span class='no'>tf</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span>()
  <span class='fu'>writeOGR</span>(<span class='no'>spdf</span>, <span class='no'>tf</span>, <span class='st'>"GeoJSON"</span>, <span class='kw'>driver</span><span class='kw'>=</span><span class='st'>"GeoJSON"</span>)
  <span class='co'>#spdf1 &lt;- readOGR(tf, "GeoJSON")</span>
  <span class='no'>spdf1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='readOGR.html'>readOGR</a></span>(<span class='no'>tf</span>)
  <span class='no'>in2_comms</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span>(<span class='fu'>slot</span>(<span class='no'>spdf1</span>, <span class='st'>"polygons"</span>), <span class='no'>comment</span>)
  <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='no'>in2_comms</span>)
  <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/Logic.html'>isTRUE</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/all.equal.html'>all.equal</a></span>(<span class='no'>in1_comms</span>, <span class='no'>in2_comms</span>)))
}</div><div class='output co'>#&gt; OGR data source with driver: GeoJSON 
#&gt; Source: "{
#&gt;     "type": "MultiPolygon",
#&gt;     "coordinates": [[[[102.0, 2.0], [103.0, 2.0], [103.0, 3.0], [102.0, 3.0],
#&gt;     [102.0, 2.0]]], [[[100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0],
#&gt;     [100.0, 0.0]]]]
#&gt;   }", layer: "OGRGeoJSON"
#&gt; with 1 features
#&gt; It has 0 fields
#&gt; [1] "0 0"
#&gt; OGR data source with driver: GeoJSON 
#&gt; Source: "/tmp/RtmpCs4VdY/file593460506e36", layer: "GeoJSON"
#&gt; with 1 features
#&gt; It has 1 fields
#&gt; [1] "0 0"
#&gt; [1] TRUE</div><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) <span class='kw'>if</span> (<span class='st'>"GML"</span> <span class='kw'>%in%</span> <span class='fu'><a href='readOGR.html'>ogrDrivers</a></span>()$<span class='no'>name</span>) {
  <span class='no'>airports</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/try.html'>try</a></span>(<span class='fu'><a href='readOGR.html'>readOGR</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"vectors/airports.gml"</span>,
    <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"rgdal"</span>)[<span class='fl'>1</span>], <span class='st'>"airports"</span>))
  <span class='kw'>if</span> (<span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span>(<span class='no'>airports</span>) <span class='kw'>!=</span> <span class='st'>"try-error"</span>) {
    <span class='fu'>writeOGR</span>(<span class='no'>cities</span>, <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span>(<span class='no'>td</span>, <span class='st'>"cities.gml"</span>, <span class='kw'>sep</span><span class='kw'>=</span><span class='st'>"/"</span>), <span class='st'>"cities"</span>, <span class='kw'>driver</span><span class='kw'>=</span><span class='st'>"GML"</span>)
    <span class='no'>cities3</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='readOGR.html'>readOGR</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span>(<span class='no'>td</span>, <span class='st'>"cities.gml"</span>, <span class='kw'>sep</span><span class='kw'>=</span><span class='st'>"/"</span>), <span class='st'>"cities"</span>)
  }
}
<span class='co'># The GML driver does not support coordinate reference systems</span>
<span class='kw'>if</span> (<span class='st'>"KML"</span> <span class='kw'>%in%</span> <span class='fu'><a href='readOGR.html'>ogrDrivers</a></span>()$<span class='no'>name</span>) {
  <span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>meuse</span>)
  <span class='fu'>coordinates</span>(<span class='no'>meuse</span>) <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"x"</span>, <span class='st'>"y"</span>)
  <span class='fu'>proj4string</span>(<span class='no'>meuse</span>) <span class='kw'>&lt;-</span> <span class='fu'><a href='CRS-class.html'>CRS</a></span>(<span class='st'>"+init=epsg:28992"</span>)
  <span class='no'>meuse_ll</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='spTransform-methods.html'>spTransform</a></span>(<span class='no'>meuse</span>, <span class='fu'><a href='CRS-class.html'>CRS</a></span>(<span class='st'>"+proj=longlat +datum=WGS84"</span>))
  <span class='fu'>writeOGR</span>(<span class='no'>meuse_ll</span>[<span class='st'>"zinc"</span>], <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span>(<span class='no'>td</span>, <span class='st'>"meuse.kml"</span>, <span class='kw'>sep</span><span class='kw'>=</span><span class='st'>"/"</span>), <span class='st'>"zinc"</span>, <span class='st'>"KML"</span>)
}</div><div class='output co'>#&gt; <span class='warning'>Warning: Discarded datum Amersfoort in CRS definition</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></span>(<span class='no'>td</span>)</div><div class='output co'>#&gt; [1] "cities.dbf" "cities.prj" "cities.shp" "cities.shx" "meuse.kml" </div><div class='input'><span class='no'>roads</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='readOGR.html'>readOGR</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"vectors"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"rgdal"</span>)[<span class='fl'>1</span>],
 <span class='st'>"kiritimati_primary_roads"</span>)</div><div class='output co'>#&gt; OGR data source with driver: ESRI Shapefile 
#&gt; Source: "/tmp/RtmpIl4nA7/temp_libpath572574d7eceb/rgdal/vectors", layer: "kiritimati_primary_roads"
#&gt; with 35 features
#&gt; It has 1 fields</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span>(<span class='no'>roads</span>)</div><div class='output co'>#&gt; Object of class SpatialLinesDataFrame
#&gt; Coordinates:
#&gt;        min      max
#&gt; x 667587.7 704048.0
#&gt; y 187716.6 226051.2
#&gt; Is projected: TRUE 
#&gt; proj4string :
#&gt; [+proj=utm +zone=4 +datum=WGS84 +units=m +no_defs]
#&gt; Data attributes:
#&gt;        Id   
#&gt;  Min.   :0  
#&gt;  1st Qu.:0  
#&gt;  Median :0  
#&gt;  Mean   :0  
#&gt;  3rd Qu.:0  
#&gt;  Max.   :0  </div><div class='input'><span class='kw'>if</span> (<span class='fu'><a href='https://rdrr.io/r/base/strsplit.html'>strsplit</a></span>(<span class='fu'><a href='GDALDriver-class.html'>getGDALVersionInfo</a></span>(), <span class='st'>" "</span>)<span class='kw'>[[</span><span class='fl'>1</span>]][<span class='fl'>2</span>] <span class='kw'>&lt;</span> <span class='st'>"2"</span>) {
<span class='co'># For GDAL &gt;= 2, the TAB driver may need a BOUNDS layer option</span>
  <span class='fu'>writeOGR</span>(<span class='no'>roads</span>, <span class='no'>td</span>, <span class='st'>"roads"</span>, <span class='kw'>driver</span><span class='kw'>=</span><span class='st'>"MapInfo File"</span>)
  <span class='no'>roads2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='readOGR.html'>readOGR</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span>(<span class='no'>td</span>, <span class='st'>"roads.tab"</span>, <span class='kw'>sep</span><span class='kw'>=</span><span class='st'>"/"</span>), <span class='st'>"roads"</span>)
  <span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span>(<span class='no'>roads2</span>)
}
<span class='no'>scot_BNG</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='readOGR.html'>readOGR</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"vectors"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"rgdal"</span>)[<span class='fl'>1</span>], <span class='st'>"scot_BNG"</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: Discarded datum OSGB_1936 in CRS definition: +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +units=m +no_defs</span></div><div class='output co'>#&gt; OGR data source with driver: ESRI Shapefile 
#&gt; Source: "/tmp/RtmpIl4nA7/temp_libpath572574d7eceb/rgdal/vectors", layer: "scot_BNG"
#&gt; with 56 features
#&gt; It has 13 fields</div><div class='output co'>#&gt; <span class='warning'>Warning: Discarded datum OSGB_1936 in CRS definition: +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +units=m +no_defs</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Discarded datum Unknown_based_on_Airy_1830_ellipsoid in CRS definition</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span>(<span class='no'>scot_BNG</span>)</div><div class='output co'>#&gt; Object of class SpatialPolygonsDataFrame
#&gt; Coordinates:
#&gt;          min       max
#&gt; x   7094.552  468285.5
#&gt; y 529495.039 1218342.5
#&gt; Is projected: TRUE 
#&gt; proj4string :
#&gt; [+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000
#&gt; +y_0=-100000 +ellps=airy +units=m +no_defs]
#&gt; Data attributes:
#&gt;      SP_ID              NAME         ID_x           COUNT       
#&gt;  0      : 1   Aberdeen    : 1   Min.   : 1.00   Min.   : 0.000  
#&gt;  1      : 1   Angus       : 1   1st Qu.:14.75   1st Qu.: 4.750  
#&gt;  10     : 1   Annandale   : 1   Median :28.50   Median : 8.000  
#&gt;  11     : 1   Argyll-Bute : 1   Mean   :28.50   Mean   : 9.571  
#&gt;  12     : 1   Banff-Buchan: 1   3rd Qu.:42.25   3rd Qu.:11.000  
#&gt;  13     : 1   Bearsden    : 1   Max.   :56.00   Max.   :39.000  
#&gt;  (Other):50   (Other)     :50                                   
#&gt;       SMR             LONG            LAT              PY         
#&gt;  Min.   :  0.0   Min.   :54.94   Min.   :1.430   Min.   :  27075  
#&gt;  1st Qu.: 49.6   1st Qu.:55.78   1st Qu.:3.288   1st Qu.: 100559  
#&gt;  Median :111.5   Median :56.04   Median :4.090   Median : 182333  
#&gt;  Mean   :152.6   Mean   :56.40   Mean   :4.012   Mean   : 267498  
#&gt;  3rd Qu.:223.0   3rd Qu.:57.02   3rd Qu.:4.730   3rd Qu.: 313845  
#&gt;  Max.   :652.2   Max.   :60.24   Max.   :6.800   Max.   :2316353  
#&gt;                                                                   
#&gt;       EXP_             AFF             X_COOR           Y_COOR       
#&gt;  Min.   : 1.100   Min.   : 0.000   Min.   :112892   Min.   : 561163  
#&gt;  1st Qu.: 4.050   1st Qu.: 1.000   1st Qu.:256624   1st Qu.: 649520  
#&gt;  Median : 6.300   Median : 7.000   Median :287577   Median : 681524  
#&gt;  Mean   : 9.575   Mean   : 8.661   Mean   :288524   Mean   : 723127  
#&gt;  3rd Qu.:10.125   3rd Qu.:11.500   3rd Qu.:333948   3rd Qu.: 794380  
#&gt;  Max.   :88.700   Max.   :24.000   Max.   :442244   Max.   :1168904  
#&gt;                                                                      
#&gt;       ID_y      
#&gt;  Min.   : 1.00  
#&gt;  1st Qu.:14.75  
#&gt;  Median :28.50  
#&gt;  Mean   :28.50  
#&gt;  3rd Qu.:42.25  
#&gt;  Max.   :56.00  
#&gt;                 </div><div class='input'><span class='kw'>if</span> (<span class='fu'><a href='https://rdrr.io/r/base/strsplit.html'>strsplit</a></span>(<span class='fu'><a href='GDALDriver-class.html'>getGDALVersionInfo</a></span>(), <span class='st'>" "</span>)<span class='kw'>[[</span><span class='fl'>1</span>]][<span class='fl'>2</span>] <span class='kw'>&lt;</span> <span class='st'>"2"</span>) {
<span class='co'># For GDAL &gt;= 2, the TAB driver may need a BOUNDS layer option</span>
  <span class='fu'>writeOGR</span>(<span class='no'>scot_BNG</span>, <span class='no'>td</span>, <span class='st'>"scot_BNG"</span>, <span class='kw'>driver</span><span class='kw'>=</span><span class='st'>"MapInfo File"</span>)
  <span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></span>(<span class='no'>td</span>)
  <span class='no'>scot_BNG2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='readOGR.html'>readOGR</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span>(<span class='no'>td</span>, <span class='st'>"scot_BNG.tab"</span>, <span class='kw'>sep</span><span class='kw'>=</span><span class='st'>"/"</span>), <span class='st'>"scot_BNG"</span>,
    <span class='kw'>addCommentsToPolygons</span><span class='kw'>=</span><span class='fl'>FALSE</span>)
  <span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span>(<span class='no'>scot_BNG2</span>)
}
<span class='fu'>writeOGR</span>(<span class='no'>scot_BNG</span>, <span class='no'>td</span>, <span class='st'>"scot_BNG"</span>, <span class='kw'>driver</span><span class='kw'>=</span><span class='st'>"MapInfo File"</span>,
 <span class='kw'>dataset_options</span><span class='kw'>=</span><span class='st'>"FORMAT=MIF"</span>)
<span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></span>(<span class='no'>td</span>)</div><div class='output co'>#&gt; [1] "cities.dbf"   "cities.prj"   "cities.shp"   "cities.shx"   "meuse.kml"   
#&gt; [6] "scot_BNG.mid" "scot_BNG.mif"</div><div class='input'><span class='no'>scot_BNG3</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='readOGR.html'>readOGR</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span>(<span class='no'>td</span>, <span class='st'>"scot_BNG.mif"</span>, <span class='kw'>sep</span><span class='kw'>=</span><span class='st'>"/"</span>), <span class='st'>"scot_BNG"</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: Discarded datum OSGB_1936 in CRS definition: +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +towgs84=375,-111,431,0,0,0,0 +units=m +no_defs,</span>
#&gt; <span class='warning'> but +towgs84= values preserved</span></div><div class='output co'>#&gt; OGR data source with driver: MapInfo File 
#&gt; Source: "/tmp/RtmpCs4VdY/rgdal_examples/scot_BNG.mif", layer: "scot_BNG"
#&gt; with 56 features
#&gt; It has 13 fields</div><div class='output co'>#&gt; <span class='warning'>Warning: Discarded datum OSGB_1936 in CRS definition: +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +towgs84=375,-111,431,0,0,0,0 +units=m +no_defs,</span>
#&gt; <span class='warning'> but +towgs84= values preserved</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Discarded datum Unknown_based_on_Airy_1830_ellipsoid in CRS definition,</span>
#&gt; <span class='warning'> but +towgs84= values preserved</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span>(<span class='no'>scot_BNG3</span>)</div><div class='output co'>#&gt; Object of class SpatialPolygonsDataFrame
#&gt; Coordinates:
#&gt;          min       max
#&gt; x   7094.552  468285.5
#&gt; y 529495.039 1218342.5
#&gt; Is projected: TRUE 
#&gt; proj4string :
#&gt; [+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000
#&gt; +y_0=-100000 +ellps=airy +towgs84=375,-111,431,0,0,0,0 +units=m
#&gt; +no_defs]
#&gt; Data attributes:
#&gt;      SP_ID              NAME         ID_x           COUNT       
#&gt;  0      : 1   Aberdeen    : 1   Min.   : 1.00   Min.   : 0.000  
#&gt;  1      : 1   Angus       : 1   1st Qu.:14.75   1st Qu.: 4.750  
#&gt;  10     : 1   Annandale   : 1   Median :28.50   Median : 8.000  
#&gt;  11     : 1   Argyll-Bute : 1   Mean   :28.50   Mean   : 9.571  
#&gt;  12     : 1   Banff-Buchan: 1   3rd Qu.:42.25   3rd Qu.:11.000  
#&gt;  13     : 1   Bearsden    : 1   Max.   :56.00   Max.   :39.000  
#&gt;  (Other):50   (Other)     :50                                   
#&gt;       SMR             LONG            LAT              PY         
#&gt;  Min.   :  0.0   Min.   :54.94   Min.   :1.430   Min.   :  27075  
#&gt;  1st Qu.: 49.6   1st Qu.:55.78   1st Qu.:3.288   1st Qu.: 100559  
#&gt;  Median :111.5   Median :56.04   Median :4.090   Median : 182333  
#&gt;  Mean   :152.6   Mean   :56.40   Mean   :4.012   Mean   : 267498  
#&gt;  3rd Qu.:223.0   3rd Qu.:57.02   3rd Qu.:4.730   3rd Qu.: 313845  
#&gt;  Max.   :652.2   Max.   :60.24   Max.   :6.800   Max.   :2316353  
#&gt;                                                                   
#&gt;       EXP_             AFF             X_COOR           Y_COOR       
#&gt;  Min.   : 1.100   Min.   : 0.000   Min.   :112892   Min.   : 561163  
#&gt;  1st Qu.: 4.050   1st Qu.: 1.000   1st Qu.:256624   1st Qu.: 649520  
#&gt;  Median : 6.300   Median : 7.000   Median :287577   Median : 681524  
#&gt;  Mean   : 9.575   Mean   : 8.661   Mean   :288524   Mean   : 723127  
#&gt;  3rd Qu.:10.125   3rd Qu.:11.500   3rd Qu.:333948   3rd Qu.: 794380  
#&gt;  Max.   :88.700   Max.   :24.000   Max.   :442244   Max.   :1168904  
#&gt;                                                                      
#&gt;       ID_y      
#&gt;  Min.   : 1.00  
#&gt;  1st Qu.:14.75  
#&gt;  Median :28.50  
#&gt;  Mean   :28.50  
#&gt;  3rd Qu.:42.25  
#&gt;  Max.   :56.00  
#&gt;                 </div><div class='input'><span class='kw'>if</span>(<span class='fu'><a href='https://rdrr.io/r/base/nchar.html'>nchar</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/Sys.getenv.html'>Sys.getenv</a></span>(<span class='st'>"OSGEO4W_ROOT"</span>)) <span class='kw'>&gt;</span> <span class='fl'>0</span>) {
    <span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>setwd</a></span>(<span class='no'>OLDPWD</span>)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#note">Note</a></li>
      <li><a href="#warning">Warning</a></li>
      <li><a href="#writeogr-polygon-bug-in-"><code>writeOGR</code> Polygon bug in 1.1-1</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Roger Bivand</p>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Roger Bivand, Tim Keitt, Barry Rowlingson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


